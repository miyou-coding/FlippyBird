<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlippyBird - ç‚¹å‡»é£è¡Œæ¸¸æˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* å…¨å±€é˜²æ­¢æ–‡æœ¬é€‰ä¸­ */
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            /* é˜²æ­¢é•¿æŒ‰å‡ºç°ä¸Šä¸‹æ–‡èœå• */
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8E8 100%);
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        #gameContainer {
            position: relative;
            width: 400px;
            height: 600px;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8E8 100%);
            border: 3px solid #333;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
        }

        #bird {
            position: absolute;
            width: 40px;
            height: 30px;
            background: #FFD700;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            left: 50px;
            top: 250px;
            transition: transform 0.1s;
            z-index: 10;
        }

        #bird::before {
            content: '';
            position: absolute;
            width: 15px;
            height: 10px;
            background: #FFA500;
            border-radius: 50%;
            right: -5px;
            top: 10px;
        }

        #bird::after {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: #000;
            border-radius: 50%;
            right: 8px;
            top: 8px;
        }

        .obstacle {
            position: absolute;
            width: 60px;
            background: #228B22;
            border: 2px solid #006400;
        }

        .obstacle-top {
            top: 0;
            border-bottom: 4px solid #006400;
        }

        .obstacle-bottom {
            bottom: 0;
            border-top: 4px solid #006400;
        }

        #score {
            position: absolute;
            top: 20px;
            left: 5px;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            z-index: 100;
        }

        #easterEggs {
            position: absolute;
            top: 25px;
            right: 5px;
            font-size: 18px; /* å¢å¤§å­—å· */
            font-weight: bold;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            z-index: 100;
            text-align: right;
            line-height: 1.4;
        }

        .easter-egg-popup {
            position: absolute;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 52px; /* å¢å¤§å­—ä½“ */
            font-weight: bold;
            color: #FFD700;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.9), 0 0 20px rgba(255,215,0,0.8); /* æ›´å¼ºçš„å‘å…‰æ•ˆæœ */
            z-index: 200;
            animation: easterEggExplosion 1.8s ease-out forwards;
            pointer-events: none;
            font-family: 'Arial Black', Arial, sans-serif; /* æ›´ç²—çš„å­—ä½“ */
        }

        @keyframes easterEggExplosion {
            0% {
                opacity: 0;
                transform: translateX(-50%) scale(0.1) rotate(-15deg);
            }
            15% {
                opacity: 1;
                transform: translateX(-50%) scale(1.8) rotate(10deg);
                text-shadow: 6px 6px 12px rgba(0,0,0,0.9), 0 0 40px rgba(255,215,0,1);
            }
            30% {
                transform: translateX(-50%) scale(0.7) rotate(-5deg);
                text-shadow: 3px 3px 8px rgba(0,0,0,0.9), 0 0 25px rgba(255,215,0,0.9);
            }
            50% {
                transform: translateX(-50%) scale(1.3) rotate(8deg);
                text-shadow: 5px 5px 10px rgba(0,0,0,0.9), 0 0 35px rgba(255,215,0,0.95);
            }
            70% {
                transform: translateX(-50%) scale(0.9) rotate(-3deg);
                text-shadow: 4px 4px 8px rgba(0,0,0,0.9), 0 0 20px rgba(255,215,0,0.8);
            }
            85% {
                transform: translateX(-50%) scale(1.1) rotate(2deg);
                opacity: 0.8;
            }
            100% {
                opacity: 0;
                transform: translateX(-50%) scale(0.5) translateY(-50px) rotate(0deg);
                text-shadow: 2px 2px 4px rgba(0,0,0,0.8), 0 0 10px rgba(255,215,0,0.6);
            }
        }

        .bonus-score {
            position: absolute;
            top: 180px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 32px; /* å¢å¤§å­—ä½“ */
            font-weight: bold;
            color: #FF0000; /* æ”¹ä¸ºçº¢è‰² */
            text-shadow: 3px 3px 6px rgba(0,0,0,0.9), 0 0 15px rgba(255,0,0,0.8); /* çº¢è‰²å‘å…‰æ•ˆæœ */
            z-index: 201;
            animation: bonusScoreExplosion 1.2s ease-out forwards;
            pointer-events: none;
            font-family: 'Arial Black', Arial, sans-serif;
        }

        @keyframes bonusScoreExplosion {
            0% {
                opacity: 0;
                transform: translateX(-50%) scale(0.2);
            }
            30% {
                opacity: 1;
                transform: translateX(-50%) scale(1.5);
                text-shadow: 4px 4px 8px rgba(0,0,0,0.9), 0 0 25px rgba(255,0,0,1);
            }
            60% {
                transform: translateX(-50%) scale(0.8);
                text-shadow: 2px 2px 4px rgba(0,0,0,0.9), 0 0 15px rgba(255,0,0,0.8);
            }
            100% {
                opacity: 0;
                transform: translateX(-50%) scale(1.2) translateY(-40px);
                text-shadow: 1px 1px 2px rgba(0,0,0,0.8), 0 0 5px rgba(255,0,0,0.6);
            }
        }

        /* ç‰¹æ®Šéšè—å½©è›‹æ ·å¼ */
        .special-easter-egg {
            font-size: 36px !important;
            color: #FFD700 !important;
            text-shadow: 6px 6px 12px rgba(0,0,0,0.9), 0 0 40px rgba(255,68,68,1), 0 0 80px rgba(255,68,68,0.8) !important;
        }

        @keyframes specialEasterEggExplosion {
            0% {
                opacity: 0;
                transform: translateX(-50%) scale(0.05) rotate(-30deg);
            }
            10% {
                opacity: 1;
                transform: translateX(-50%) scale(2.2) rotate(20deg);
                text-shadow: 8px 8px 16px rgba(0,0,0,0.9), 0 0 60px rgba(255,68,68,1), 0 0 120px rgba(255,68,68,0.9);
            }
            25% {
                transform: translateX(-50%) scale(0.6) rotate(-10deg);
                text-shadow: 4px 4px 8px rgba(0,0,0,0.9), 0 0 30px rgba(255,68,68,0.9);
            }
            45% {
                transform: translateX(-50%) scale(1.8) rotate(15deg);
                text-shadow: 7px 7px 14px rgba(0,0,0,0.9), 0 0 50px rgba(255,68,68,1);
            }
            70% {
                transform: translateX(-50%) scale(0.8) rotate(-5deg);
                text-shadow: 5px 5px 10px rgba(0,0,0,0.9), 0 0 25px rgba(255,68,68,0.8);
            }
            90% {
                transform: translateX(-50%) scale(1.2) rotate(3deg);
                opacity: 0.9;
            }
            100% {
                opacity: 0;
                transform: translateX(-50%) scale(0.3) translateY(-80px) rotate(0deg);
                text-shadow: 2px 2px 4px rgba(0,0,0,0.8), 0 0 10px rgba(255,68,68,0.5);
            }
        }

        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            display: none;
            z-index: 1000;
            min-width: 350px; /* å¢åŠ æœ€å°å®½åº¦ */
        }

        #gameOver h2 {
            margin-bottom: 15px;
            font-size: 28px;
        }

        #gameOver p {
            margin-bottom: 20px;
            font-size: 18px;
        }

        #restartBtn {
            background: #FFD700;
            color: #333;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        #restartBtn:hover {
            background: #FFC700;
        }

        #startScreen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            z-index: 1000;
        }

        #startScreen h1 {
            margin-bottom: 15px;
            font-size: 32px;
            color: #FFD700;
        }

        #startScreen p {
            margin-bottom: 20px;
            font-size: 16px;
        }

        .difficulty-buttons {
            margin-bottom: 20px;
        }

        .difficulty-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            margin: 0 5px;
            font-size: 14px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .difficulty-btn:hover {
            background: #45a049;
        }

        .difficulty-btn.active {
            background: #FFD700;
            color: #333;
        }

        #startBtn {
            background: #FFD700;
            color: #333;
            border: none;
            padding: 12px 24px;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        #startBtn:hover {
            background: #FFC700;
        }

        .cloud {
            position: absolute;
            background: white;
            border-radius: 50px;
            opacity: 0.7;
        }

        .cloud::before {
            content: '';
            position: absolute;
            background: white;
            border-radius: 50px;
        }

        .cloud::after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 50px;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="score">å¾—åˆ†: 0</div>
        <div id="easterEggs">AIç ´å±€[0] çœŸè¯š[0] åˆ©ä»–[0] èšç„¦[0]</div>

        <div id="startScreen">
            <h1>ğŸ¦ FlippyBird</h1>
            <p>ç‚¹å‡»å±å¹•æ§åˆ¶å°é¸Ÿé£è¡Œ<br>é¿å¼€éšœç¢ç‰©ï¼Œè·å¾—é«˜åˆ†ï¼</p>
            <div class="difficulty-buttons">
                <button class="difficulty-btn active" data-difficulty="veryeasy">è¶…ç®€å•</button>
                <button class="difficulty-btn" data-difficulty="easy">ç®€å•</button>
                <button class="difficulty-btn" data-difficulty="hard">å›°éš¾</button>
            </div>
            <button id="startBtn">å¼€å§‹æ¸¸æˆ</button>
        </div>

        <div id="gameOver">
            <h2>æ¸¸æˆç»“æŸï¼</h2>
            <p id="finalScore">æœ€ç»ˆå¾—åˆ†: 0</p>
            <p style="margin-bottom: 20px; font-size: 16px; color: #FFD700; font-weight: bold;">AIç ´å±€ï¼šçœŸè¯šã€åˆ©ä»–ã€èšç„¦</p>
            <div class="difficulty-buttons">
                <button class="difficulty-btn" data-difficulty="veryeasy">è¶…ç®€å•</button>
                <button class="difficulty-btn" data-difficulty="easy">ç®€å•</button>
                <button class="difficulty-btn" data-difficulty="hard">å›°éš¾</button>
            </div>
            <p style="margin: 10px 0; font-size: 14px; color: #ccc;">é€‰æ‹©éš¾åº¦åé‡æ–°å¼€å§‹</p>
            <button id="restartBtn">é‡æ–°å¼€å§‹</button>
        </div>

        <div id="bird"></div>
    </div>

    <script>
        class FlippyBird {
            constructor() {
                this.gameContainer = document.getElementById('gameContainer');
                this.bird = document.getElementById('bird');
                this.scoreElement = document.getElementById('score');
                this.easterEggsElement = document.getElementById('easterEggs');
                this.gameOverScreen = document.getElementById('gameOver');
                this.startScreen = document.getElementById('startScreen');
                this.finalScoreElement = document.getElementById('finalScore');
                this.startBtn = document.getElementById('startBtn');
                this.restartBtn = document.getElementById('restartBtn');

                // éš¾åº¦è®¾ç½® - ç®€åŒ–ä¸º3çº§
                this.difficultySettings = {
                    veryeasy: {
                        gravity: 0.2,         // æå°çš„é‡åŠ›ï¼Œéå¸¸ç¼“æ…¢çš„ä¸‹é™
                        jumpPower: -6,        // æ›´å°çš„è·³è·ƒåŠ›ï¼Œæ¸©å’Œçš„ä¸Šå‡
                        gap: 250,             // è¶…å®½çš„é€šé“é—´éš™
                        obstacleSpeed: 1.5,   // ææ…¢çš„éšœç¢ç‰©é€Ÿåº¦
                        spawnInterval: 3500,  // è¶…é•¿çš„ç”Ÿæˆé—´éš”
                        tolerance: 12         // è¶…å¤§çš„ç¢°æ’å®¹é”™
                    },
                    easy: {
                        gravity: 0.25,        // æ›´å°çš„é‡åŠ›ï¼Œä¸‹é™æ›´ç¼“æ…¢
                        jumpPower: -7,        // æ›´å°çš„è·³è·ƒåŠ›ï¼Œä¸Šå‡æ›´æ¸©å’Œ
                        gap: 220,             // æ›´å®½çš„é€šé“é—´éš™
                        obstacleSpeed: 1.8,   // æ›´æ…¢çš„éšœç¢ç‰©é€Ÿåº¦
                        spawnInterval: 3200,  // æ›´é•¿çš„ç”Ÿæˆé—´éš”
                        tolerance: 8          // æ›´å¤§çš„ç¢°æ’å®¹é”™
                    },
                    hard: {
                        gravity: 0.45,
                        jumpPower: -9,
                        gap: 150,
                        obstacleSpeed: 3.0,
                        spawnInterval: 2000,
                        tolerance: 3
                    }
                };

                this.currentDifficulty = 'veryeasy'; // é»˜è®¤è¶…ç®€å•æ¨¡å¼
                this.loadDifficultySettings();

                this.birdY = 200; // é™ä½åˆå§‹ä½ç½®ï¼Œç»™ç©å®¶æ›´å¤šä¸Šå‡ç©ºé—´
                this.birdVelocity = 0;
                this.obstacles = [];
                this.score = 0;
                this.gameRunning = false;
                this.gameStarted = false;

                // å½©è›‹ç³»ç»Ÿ
                this.easterEggs = {
                    'AIç ´å±€': 0,
                    'çœŸè¯š': 0,
                    'åˆ©ä»–': 0,
                    'èšç„¦': 0,
                    'æ´‹å“¥ç‰›é€¼': 0 // éšè—å½©è›‹
                };
                this.easterEggTexts = ['AIç ´å±€', 'çœŸè¯š', 'åˆ©ä»–', 'èšç„¦'];
                this.easterEggScores = {
                    'AIç ´å±€': 1,
                    'çœŸè¯š': 3,
                    'åˆ©ä»–': 5,
                    'èšç„¦': 2,
                    'æ´‹å“¥ç‰›é€¼': 10 // éšè—å½©è›‹æœ€é«˜åˆ†æ•°
                };

                this.init();
            }

            loadDifficultySettings() {
                const settings = this.difficultySettings[this.currentDifficulty];
                this.gravity = settings.gravity;
                this.jumpPower = settings.jumpPower;
                this.gap = settings.gap;
                this.obstacleSpeed = settings.obstacleSpeed;
                this.spawnInterval = settings.spawnInterval;
                this.collisionTolerance = settings.tolerance || 5; // åŠ è½½ç¢°æ’å®¹é”™
            }

            init() {
                this.createClouds();
                this.setupDifficultyButtons();
                this.updateDifficultyButtons(); // åˆå§‹åŒ–éš¾åº¦æŒ‰é’®çŠ¶æ€
                this.startBtn.addEventListener('click', () => this.startGame());
                this.restartBtn.addEventListener('click', () => this.restartGame());
                this.gameContainer.addEventListener('click', (e) => {
                    if (this.gameRunning && e.target !== this.startBtn && e.target !== this.restartBtn) {
                        this.jump();
                    }
                });

                document.addEventListener('keydown', (e) => {
                    if (e.code === 'Space' && this.gameRunning) {
                        e.preventDefault();
                        this.jump();
                    }
                });
            }

            setupDifficultyButtons() {
                const difficultyButtons = document.querySelectorAll('.difficulty-btn');
                difficultyButtons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        // ç§»é™¤æ‰€æœ‰activeç±»
                        difficultyButtons.forEach(b => b.classList.remove('active'));
                        // æ·»åŠ activeç±»åˆ°å½“å‰æŒ‰é’®
                        e.target.classList.add('active');
                        // è®¾ç½®å½“å‰éš¾åº¦
                        this.currentDifficulty = e.target.dataset.difficulty;
                        this.loadDifficultySettings();

                        console.log('éš¾åº¦å·²è®¾ç½®ä¸º:', this.currentDifficulty);
                    });
                });
            }

            updateDifficultyButtons() {
                // æ›´æ–°æ‰€æœ‰éš¾åº¦æŒ‰é’®çš„activeçŠ¶æ€
                const difficultyButtons = document.querySelectorAll('.difficulty-btn');
                difficultyButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.difficulty === this.currentDifficulty) {
                        btn.classList.add('active');
                    }
                });
            }

            createClouds() {
                for (let i = 0; i < 3; i++) {
                    const cloud = document.createElement('div');
                    cloud.className = 'cloud';
                    cloud.style.width = Math.random() * 60 + 40 + 'px';
                    cloud.style.height = Math.random() * 30 + 20 + 'px';
                    cloud.style.left = Math.random() * 340 + 'px';
                    cloud.style.top = Math.random() * 200 + 'px';

                    this.gameContainer.appendChild(cloud);
                    this.animateCloud(cloud);
                }
            }

            animateCloud(cloud) {
                let cloudX = parseInt(cloud.style.left);
                const speed = Math.random() * 0.5 + 0.2;

                const moveCloud = () => {
                    cloudX -= speed;
                    if (cloudX < -100) {
                        cloudX = 450;
                    }
                    cloud.style.left = cloudX + 'px';
                    requestAnimationFrame(moveCloud);
                };
                moveCloud();
            }

            startGame() {
                this.startScreen.style.display = 'none';
                this.gameStarted = true;
                this.gameRunning = true;
                this.gameLoop();
                this.spawnObstacle();
            }

            jump() {
                if (this.gameRunning) {
                    this.birdVelocity = this.jumpPower;
                    this.bird.style.transform = 'rotate(-20deg)';
                    setTimeout(() => {
                        this.bird.style.transform = 'rotate(0deg)';
                    }, 200);
                }
            }

            gameLoop() {
                if (!this.gameRunning) return;

                // æ›´æ–°å°é¸Ÿä½ç½®
                this.birdVelocity += this.gravity;
                this.birdY += this.birdVelocity;

                // é™åˆ¶å°é¸Ÿåœ¨å®¹å™¨å†…
                if (this.birdY < 0) {
                    this.birdY = 0;
                    this.birdVelocity = 0;
                }
                if (this.birdY > 570) {
                    this.gameOver();
                    return;
                }

                this.bird.style.top = this.birdY + 'px';

                // æ ¹æ®é€Ÿåº¦æ—‹è½¬å°é¸Ÿ
                let rotation = this.birdVelocity * 3;
                rotation = Math.max(-30, Math.min(30, rotation));
                this.bird.style.transform = `rotate(${rotation}deg)`;

                // æ›´æ–°éšœç¢ç‰©
                this.updateObstacles();

                // æ£€æµ‹ç¢°æ’
                this.checkCollisions();

                requestAnimationFrame(() => this.gameLoop());
            }

            spawnObstacle() {
                if (!this.gameRunning) return;

                const minHeight = 60;
                const maxHeight = 300;
                const height = Math.random() * (maxHeight - minHeight) + minHeight;

                const obstacleTop = document.createElement('div');
                obstacleTop.className = 'obstacle obstacle-top';
                obstacleTop.style.height = height + 'px';
                obstacleTop.style.left = '450px'; // å¢åŠ åˆå§‹è·ç¦»ï¼Œç»™ç©å®¶æ›´å¤šååº”æ—¶é—´

                const obstacleBottom = document.createElement('div');
                obstacleBottom.className = 'obstacle obstacle-bottom';
                obstacleBottom.style.height = (600 - height - this.gap) + 'px';
                obstacleBottom.style.left = '450px'; // å¢åŠ åˆå§‹è·ç¦»

                this.gameContainer.appendChild(obstacleTop);
                this.gameContainer.appendChild(obstacleBottom);

                this.obstacles.push({
                    top: obstacleTop,
                    bottom: obstacleBottom,
                    x: 450, // æ›´æ–°åˆå§‹ä½ç½®
                    passed: false
                });

                setTimeout(() => this.spawnObstacle(), this.spawnInterval);
            }

            updateObstacles() {
                this.obstacles.forEach((obstacle, index) => {
                    obstacle.x -= this.obstacleSpeed; // ä½¿ç”¨åŠ¨æ€éšœç¢ç‰©é€Ÿåº¦
                    obstacle.top.style.left = obstacle.x + 'px';
                    obstacle.bottom.style.left = obstacle.x + 'px';

                    // è®¡åˆ†
                    if (!obstacle.passed && obstacle.x < 50) {
                        obstacle.passed = true;
                        this.score++;
                        this.scoreElement.textContent = 'å¾—åˆ†: ' + this.score;

                        // 60%æ¦‚ç‡è§¦å‘å½©è›‹ï¼Œä½†æœ‰ç‰¹æ®Šéšè—å½©è›‹é€»è¾‘
                        if (Math.random() < 0.6) {
                            this.triggerEasterEgg();
                        }
                    }

                    // ç§»é™¤å±å¹•å¤–çš„éšœç¢ç‰©
                    if (obstacle.x < -60) {
                        obstacle.top.remove();
                        obstacle.bottom.remove();
                        this.obstacles.splice(index, 1);
                    }
                });
            }

            checkCollisions() {
                const birdRect = this.bird.getBoundingClientRect();
                const containerRect = this.gameContainer.getBoundingClientRect();

                this.obstacles.forEach(obstacle => {
                    const topRect = obstacle.top.getBoundingClientRect();
                    const bottomRect = obstacle.bottom.getBoundingClientRect();

                    if (birdRect.right > topRect.left && birdRect.left < topRect.right) {
                        // ä½¿ç”¨åŠ¨æ€ç¢°æ’å®¹é”™å€¼ï¼Œæ ¹æ®éš¾åº¦è®¾ç½®
                        const tolerance = this.collisionTolerance;
                        if (birdRect.top + tolerance < topRect.bottom || birdRect.bottom - tolerance > bottomRect.top) {
                            this.gameOver();
                        }
                    }
                });
            }

            triggerEasterEgg() {
                // éšè—å½©è›‹è§¦å‘é€»è¾‘ï¼šåŸºäºåˆ†æ•°çš„ç‰¹å®šæ¡ä»¶
                const currentScore = this.score;
                let selectedText;

                // ç‰¹æ®Šéšè—å½©è›‹è§¦å‘æ¡ä»¶
                if (currentScore % 9 === 0) {
                    // ç‰¹æ®Šåˆ†æ•°è§¦å‘éšè—å½©è›‹
                    selectedText = 'æ´‹å“¥ç‰›é€¼';
                } else if (Math.random() < 0.10 && currentScore > 3) {
                    selectedText = 'æ´‹å“¥ç‰›é€¼';
                } else {
                    // æ­£å¸¸å½©è›‹
                    selectedText = this.easterEggTexts[Math.floor(Math.random() * this.easterEggTexts.length)];
                }

                const bonusScore = this.easterEggScores[selectedText];
                const isSpecial = selectedText === 'æ´‹å“¥ç‰›é€¼';

                // å¢åŠ å½©è›‹è®¡æ•°
                this.easterEggs[selectedText]++;

                // æ˜¾ç¤ºå½©è›‹æ–‡å­—ï¼ˆç‰¹æ®Šå½©è›‹æœ‰2å€ç‚¸è£‚æ•ˆæœï¼‰
                if (isSpecial) {
                    this.showSpecialEasterEgg(selectedText);
                } else {
                    this.showEasterEggText(selectedText);
                }

                // æ˜¾ç¤ºé¢å¤–å¾—åˆ†
                this.showBonusScore(bonusScore, isSpecial);

                // å¢åŠ å¾—åˆ†
                this.score += bonusScore;
                this.scoreElement.textContent = 'å¾—åˆ†: ' + this.score;

                // æ›´æ–°å½©è›‹ç»Ÿè®¡
                this.updateEasterEggsDisplay();
            }

            showEasterEggText(text) {
                const popup = document.createElement('div');
                popup.className = 'easter-egg-popup';
                popup.textContent = text;
                this.gameContainer.appendChild(popup);

                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    if (popup.parentNode) {
                        popup.parentNode.removeChild(popup);
                    }
                }, 2000);
            }

            showBonusScore(bonus, isSpecial = false) {
                const bonusDisplay = document.createElement('div');
                bonusDisplay.className = isSpecial ? 'bonus-score special-bonus' : 'bonus-score';
                bonusDisplay.textContent = '+' + bonus;

                if (isSpecial) {
                    // ç‰¹æ®Šå½©è›‹çš„é¢å¤–æ•ˆæœ
                    bonusDisplay.style.fontSize = '48px'; // æ›´å¤§å­—ä½“
                    bonusDisplay.style.color = '#FFD700'; // æ·±é»„è‰²
                    bonusDisplay.style.textShadow = '4px 4px 8px rgba(0,0,0,0.9), 0 0 30px rgba(255,215,0,1)';
                }

                this.gameContainer.appendChild(bonusDisplay);

                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    if (bonusDisplay.parentNode) {
                        bonusDisplay.parentNode.removeChild(bonusDisplay);
                    }
                }, isSpecial ? 2000 : 1200); // ç‰¹æ®Šå½©è›‹æ˜¾ç¤ºæ›´ä¹…
            }

            showSpecialEasterEgg(text) {
                const popup = document.createElement('div');
                popup.className = 'easter-egg-popup special-easter-egg';
                popup.textContent = text;

                // ç‰¹æ®Šæ ·å¼ - 1å€ç‚¸è£‚æ•ˆæœï¼ˆç¼©å°ä¸€åŠï¼‰
                popup.style.fontSize = '36px'; // ç¼©å°åˆ°ä¸€åŠå¤§å°
                popup.style.color = '#FFD700'; // æ·±é»„è‰²
                popup.style.textShadow = '6px 6px 12px rgba(0,0,0,0.9), 0 0 40px rgba(255,215,0,1), 0 0 80px rgba(255,215,0,0.8)';
                popup.style.animation = 'specialEasterEggExplosion 2.5s ease-out forwards';
                popup.style.whiteSpace = 'nowrap'; // é˜²æ­¢æ¢è¡Œ

                this.gameContainer.appendChild(popup);

                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    if (popup.parentNode) {
                        popup.parentNode.removeChild(popup);
                    }
                }, 2500);
            }

            updateEasterEggsDisplay() {
                const displayText = Object.keys(this.easterEggs)
                    .filter(key => key !== 'æ´‹å“¥ç‰›é€¼') // éšè—å½©è›‹ä¸æ˜¾ç¤ºåœ¨é¡¶éƒ¨
                    .map(key => `${key}[${this.easterEggs[key]}]`)
                    .join(' ');
                this.easterEggsElement.textContent = displayText;
            }

            gameOver() {
                this.gameRunning = false;
                this.finalScoreElement.textContent = 'æœ€ç»ˆå¾—åˆ†: ' + this.score;
                // æ›´æ–°æ¸¸æˆç»“æŸç•Œé¢çš„éš¾åº¦æŒ‰é’®çŠ¶æ€
                this.updateDifficultyButtons();
                this.gameOverScreen.style.display = 'block';
            }

            restartGame() {
                // æ¸…é™¤æ‰€æœ‰éšœç¢ç‰©
                this.obstacles.forEach(obstacle => {
                    obstacle.top.remove();
                    obstacle.bottom.remove();
                });
                this.obstacles = [];

                // é‡æ–°åŠ è½½éš¾åº¦è®¾ç½®ï¼ˆç©å®¶å¯èƒ½åœ¨æ¸¸æˆç»“æŸæ—¶æ›´æ”¹äº†éš¾åº¦ï¼‰
                this.loadDifficultySettings();

                // é‡ç½®æ¸¸æˆçŠ¶æ€
                this.birdY = 200; // ä½¿ç”¨ä¼˜åŒ–åçš„åˆå§‹ä½ç½®
                this.birdVelocity = 0;
                this.score = 0;
                this.scoreElement.textContent = 'å¾—åˆ†: 0';
                this.bird.style.top = this.birdY + 'px';
                this.bird.style.transform = 'rotate(0deg)';

                // é‡ç½®å½©è›‹ç»Ÿè®¡
                this.easterEggs = { 'AIç ´å±€': 0, 'çœŸè¯š': 0, 'åˆ©ä»–': 0, 'èšç„¦': 0, 'æ´‹å“¥ç‰›é€¼': 0 };
                this.updateEasterEggsDisplay();

                this.gameOverScreen.style.display = 'none';
                this.gameRunning = true;

                this.gameLoop();
                // å»¶è¿Ÿç”Ÿæˆç¬¬ä¸€ä¸ªéšœç¢ç‰©ï¼Œé¿å…é‡å 
                setTimeout(() => this.spawnObstacle(), 1000);
            }
        }

        // å¯åŠ¨æ¸¸æˆ
        window.addEventListener('DOMContentLoaded', () => {
            new FlippyBird();
        });
    </script>
</body>
</html>